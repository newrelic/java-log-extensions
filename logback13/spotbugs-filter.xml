<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright 2025. New Relic Corporation. All rights reserved.
  ~ SPDX-License-Identifier: Apache-2.0
  -->
<FindBugsFilter xmlns="https://github.com/spotbugs/filter/3.0.0"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="https://github.com/spotbugs/filter/3.0.0 https://raw.githubusercontent.com/spotbugs/spotbugs/3.1.0/spotbugs/etc/findbugsfilter.xsd">
    <Match>
        <!--
          This is not final so that it can be reassigned in tests to inject a mock Agent.
        -->
        <Bug pattern="MS_SHOULD_BE_FINAL"/>
        <Class name="com.newrelic.logging.logback13.NewRelicAsyncAppender"/>
    </Match>
    <Match>
        <!--
          We have to write to a static because otherwise this value is set based on a classload.
        -->
        <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"/>
        <Class name="com.newrelic.logging.logback13.NewRelicJsonLayoutTest"/>
    </Match>

    <Match>
        <!--
        Logback 1.3.x store MDC in ContextMap instead of ThreadLocal storage.
        This change requires update to MDC handling, which could possibly trigger false positives.
        -->
        <Bug pattern="MS_EXPOSE_REP"/>
        <Class name="com.newrelic.logging.logback13.NewRelicAsyncAppender"/>
    </Match>

    <Match>
        <!--
        Prevent false positives due to proper synchronization in Logback 1.3.x's async logging.
        The appender correctly handles flushing and processing of log events.
        -->
        <Bug pattern="SWL_SLEEP_WITH_LOCK_HELD"/>
        <Class name="com.newrelic.logging.logback13.*"/>
    </Match>

    <Match>
        <!--
        Allow proper handling of ContextMap MDC (since it replaced using the MCDAdapter).
        Ensures logging context is stored  at the LoggerContext level, instead of ThreadLocal.
        -->
        <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
        <Class name="com.newrelic.logging.logback13.NewRelicAsyncAppender"/>
    </Match>

    <Match>
        <!--
        Prevent SpotBugs from flagging valid JSON encoding operations incorrectly.
        Log events are properly formated before being written to the output stream.
        -->
        <Bug pattern="NP_NULL_ON_SOME_PATH"/>
        <Class name="com.newrelic.logging.logback13.NewRelicAsyncJsonEncoder"/>
    </Match>
</FindBugsFilter>